---
import { getCollection } from "astro:content";
import { i18nPropsAndParams } from "astro-loader-i18n";
import { C } from "../../../site.config";

export const getStaticPaths = async () => {
  const routePattern = "[...test]/[files]/[slug]";
  const filesCollection = await getCollection("files");

  return i18nPropsAndParams(filesCollection, {
    defaultLocale: C.DEFAULT_LOCALE,
    routePattern,
    segmentTranslations: C.SEGMENT_TRANSLATIONS,
    localeParamName: "test"
  });
};

const params = Astro.params;
const props = Astro.props;
---

<dl>
  <dt>Params</dt>
  <dd>
    {JSON.stringify(params)}
  </dd>
  <dt>Props</dt>
  <dd>
    {JSON.stringify(props)}
  </dd>
</dl>
